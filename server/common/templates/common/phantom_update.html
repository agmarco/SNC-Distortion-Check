{% extends "base.html" %}

{% load static %}

{% block "content" %}
  <h1>Edit Phantom</h1>
  <form action="{% url 'update_phantom' phantom.pk %}" method="post">
    {% csrf_token %}
    {{ form.errors }}
    {{ form.name.label }} {{ form.name }} <input type="submit" value="Save Name Change">
  </form>
  <label>Model Number</label> {{ phantom.model }}<br>
  <label>Serial Number</label> {{ phantom.serial_number }}
  <table>
  <thead>
    <tr>
      <th>Active</th>
      <th>Gold Standard Grid Intersection Locations</th>
      <th colspan="4">Actions</th>
    </tr>
  </thead>
  <tbody>
    {% for golden_fiducials in view.golden_fiducials %}
      <tr>
        <td>{% if golden_fiducials.is_active %}<i class="fa fa-check" aria-hidden="true"></i>{% endif %}</td>
        <td>{{ golden_fiducials.source_summary }}</td>
        <td>{% if golden_fiducials.type == 'CT' %}<a href="{{ golden_fiducials.dicom_series.zipped_dicom_files.url }}">Download Images</a>{% endif %}</td>
        <td><a href="{% url 'golden_fiducials_csv' phantom.pk golden_fiducials.pk %}">Download Points</a></td>
        <td>
          {% if not golden_fiducials.is_active %}
            <form action="{% url 'activate_golden_fiducials' phantom.pk golden_fiducials.pk %}" method="post">
              {% csrf_token %}
              <input type="submit" value="Set Active" />
            </form>
          {% endif %}
        </td>
        <td>{% if not golden_fiducials.is_active and not golden_fiducials.type == 'CAD' %}<a href="{% url 'delete_golden_fiducials' phantom.pk golden_fiducials.pk %}"><i class="fa fa-trash-o" aria-hidden="true"></i></a>{% endif %}</td>
      </tr>
    {% endfor %}
  </tbody>
  </table>
  <a href="{% url 'upload_ct' phantom.pk %}">Upload Gold Standard CT</a>
  <a href="{% url 'upload_raw' phantom.pk %}">Upload Raw Points</a>
{% endblock %}

{% block "scripts" %}
  <script src="{% static 'fontawesome.js' %}"></script>
{% endblock %}
